<div layout="column" ng-class="status">
	<div layout="row" layout-align="end top">
		<div flex>
			<div layout="row">
				<div>
					<h1 hide-xs>
						<md-icon class="avatar status">
							<i class="fas fa-dot-circle fa-3x"></i>
						</md-icon>
					</h1>
				</div>
				<div layout="column">
					<div>
						<h1 class="status">
							{{name}}
						</h1>
					</div>
					<div>
						<div class="md-caption" ng-show="topicVisible" md-colors="{color:'accent'}" hide-xs>
							IP: {{ip}}
						</div>
						<div class="md-caption" ng-show="topicVisible" md-colors="{color:'accent'}">
							[ {{topic}} ]
						</div>
					</div>
				</div>
			</div>
		</div>
		<div>
			<md-button class="md-icon-button md-primary" aria-label="Configure" ng-click="configure = !configure" ng-init="configure = false"
			 hide-xs>
				<md-tooltip>Configure</md-tooltip>
				<i class="fas fa-cogs"></i>
			</md-button>
			<md-button class="md-icon-button md-accent" aria-label="Show topic" ng-click="topicVisible = !topicVisible" ng-init="topicVisible = false"
			 hide-xs>
				<md-tooltip>{{topic}}</md-tooltip>
				<i class="fas fa-question"></i>
			</md-button>
		</div>
	</div>
	<div class="md-padding" md-whiteframe="3" ng-show="configure">
		<h2>Configurando {{ip}}</h2>
		<div layout="column">
			<div layout="row" ng-repeat="wifi in cfg.wifis">
				<md-input-container flex>
					<label>WiFi #{{$index+1}}</label>
					<input ng-model="wifi.ssid" />
				</md-input-container>
				<md-input-container flex>
					<label>Password</label>
					<input ng-model="wifi.password" />
				</md-input-container>
			</div>
			<md-input-container flex>
				<label>Device Name</label>
				<input ng-model="cfg.deviceName" />
			</md-input-container>
			<md-input-container flex>
				<label>Mqtt Connection String</label>
				<input ng-model="cfg.mqttConnectionString" placeholder="mqtt://username:password@host:port" />
			</md-input-container>
			<md-input-container flex>
				<label>Mqtt Topic Base</label>
				<input ng-model="cfg.topicBase" />
			</md-input-container>
			<md-input-container flex>
				<label>OTA Url:</label>
				<input ng-model="cfg.otaUrl" type="url" />
			</md-input-container>
			<div layout="row">
				<md-input-container flex>
					<label>Host Address</label>
					<input ng-model="cfg.hostAddress" type="ip" ng-pattern='/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/' placeholder='xxx.xxx.xxx.xxx' />
				</md-input-container>
				<md-input-container>
						<label>Host Port</label>
						<input ng-model="cfg.hostPort" type="number" />
					</md-input-container>
			</div>
			<div layout="row">
				<md-input-container ng-repeat="relay in cfg.relays" flex>
					<label>Relay #{{$index+1}}</label>
					<input ng-model="relay" />
				</md-input-container>
			</div>
			<div layout="row">
				<md-input-container ng-repeat="button in cfg.buttons" flex>
					<label>Button #{{$index+1}}</label>
					<input ng-model="button" />
				</md-input-container>
			</div>
		</div>
	</div>

	<div ng-repeat="metric in metrics">
		<metric metric="metric"></metric>
	</div>
	<hr/>
	<div ng-repeat="component in components">
		<component component="component"></component>
		<hr/>
	</div>
	<div>
		<div ng-repeat="event in events">
			{{event.date}} - {{event.message}}
		</div>
	</div>
	<logs topic="topic"></logs>
</div>